# ğŸ“ˆ ì‹œê³„ì—´ ì°¨íŠ¸

- ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹œê³„ì—´ ì°¨íŠ¸ë¥¼ êµ¬í˜„í•˜ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
- ì´ëŠ” ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© í”„ë¡ íŠ¸ì—”ë“œ 12ì°¨ 4ì£¼ì°¨ ê³¼ì œì— í•´ë‹¹í•©ë‹ˆë‹¤.

## ğŸš€ [ë°°í¬ ì‚¬ì´íŠ¸](http://time-ser-chart.s3-website.ap-northeast-2.amazonaws.com/)
GitHub Actionsë¥¼ í™œìš©í•˜ì—¬ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ AWS S3ë¡œ ë°°í¬í•˜ì˜€ìŠµë‹ˆë‹¤.

<br /> 

## ğŸ“Œ í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•
1. Clone the repo
```javascript
$ git clone https://github.com/dbwlgp1yng/time-ser-chart.git
```

2. Install npm packages 
```javascript
$ npm install
```

3. Get start
```
$ npm start
```

<br /> 

## âœ¨ ê¸°ìˆ  ìŠ¤íƒ
<div>
  <img src="https://img.shields.io/badge/react-61DAFB?style=flat&logo=react&logoColor=white">
  <img src="https://img.shields.io/badge/typescript-3178C6?style=flat&logo=typescript&logoColor=white">
  <img src="https://img.shields.io/badge/styled components-DB7093?style=flat&logo=styledcomponents&logoColor=white">
  <img src="https://img.shields.io/badge/axios-5A29E4?style=flat&logo=axios&logoColor=white">
  <img src="https://img.shields.io/badge/react router-CA4245?style=flat&logo=react router&logoColor=white">
  <img src="https://img.shields.io/badge/-Recharts-CA4245?style=flat&logo=Recharts&logoColor=white">
</div>
<br />

## âœ… ìš”êµ¬ì‚¬í•­
1. [x] ì‹œê³„ì—´ ì°¨íŠ¸ ë§Œë“¤ê¸°
    - [x] ì£¼ì–´ì§„ JSON ë°ì´í„°ì˜ `key`ê°’(ì‹œê°„)ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹œê³„ì—´ ì°¨íŠ¸ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”
    - [x] í•˜ë‚˜ì˜ ì°¨íŠ¸ì•ˆì— Area í˜•íƒœì˜ ê·¸ë˜í”„ì™€ Bar í˜•íƒœì˜ ê·¸ë˜í”„ê°€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ” ë³µí•© ê·¸ë˜í”„ë¡œ ë§Œë“¤ì–´ì£¼ì„¸ìš”
    - [x] Area ê·¸ë˜í”„ì˜ ê¸°ì¤€ê°’ì€ `value_area` ê°’ì„ ì´ìš©í•´ì£¼ì„¸ìš”
    - [x] Bar ê·¸ë˜í”„ì˜ ê¸°ì¤€ê°’ì€ `value_bar` ê°’ì„ ì´ìš©í•´ì£¼ì„¸ìš”
    - [x] ì°¨íŠ¸ì˜ Yì¶•ì— ëŒ€ëµì ì¸ ìˆ˜ì¹˜ë¥¼ í‘œí˜„í•´ì£¼ì„¸ìš”
  
2. [x] í˜¸ë²„ ê¸°ëŠ¥ êµ¬í˜„
    - [x] íŠ¹ì • ë°ì´í„° êµ¬ì—­ì— ë§ˆìš°ìŠ¤ í˜¸ë²„ì‹œ `id, value_area, value_bar` ë°ì´í„°ë¥¼ íˆ´íŒ í˜•íƒœë¡œ ì œê³µí•´ì£¼ì„¸ìš”
  
3. [x] í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„
    - [x] í•„í„°ë§ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì£¼ì„¸ìš”, í•„í„°ë§ì€ íŠ¹ì • ë°ì´í„° êµ¬ì—­ì„ í•˜ì´ë¼ì´íŠ¸ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•´ì£¼ì„¸ìš”
    - [x] í•„í„°ë§ ê¸°ëŠ¥ì€ ë²„íŠ¼ í˜•íƒœë¡œ IDê°’(ì§€ì—­ì´ë¦„)ì„ ì´ìš©í•´ì£¼ì„¸ìš”
    - [x] í•„í„°ë§ ì‹œ ë²„íŠ¼ì—ì„œ ì„ íƒí•œ IDê°’ê³¼ ë™ì¼í•œ IDê°’ì„ ê°€ì§„ ë°ì´í„° êµ¬ì—­ë§Œ í•˜ì´ë¼ì´íŠ¸ ì²˜ë¦¬ë¥¼ í•´ì£¼ì„¸ìš”
    - [x] íŠ¹ì • ë°ì´í„° êµ¬ì—­ì„ í´ë¦­ ì‹œì—ë„ í•„í„°ë§ ê¸°ëŠ¥ê³¼ ë™ì¼í•œ í˜•íƒœë¡œ ë™ì¼í•œ IDê°’ì„ ê°€ì§„ ë°ì´í„° êµ¬ì—­ì„ í•˜ì´ë¼ì´íŠ¸í•´ì£¼ì„¸ìš”

<br /> 

## ğŸ’¡ í•µì‹¬ê¸°ëŠ¥ êµ¬í˜„

<div align='center'>
<img width="800" src="https://github.com/dbwlgp1yng/time-ser-chart/assets/126330595/7a4463fe-bd58-42e5-a1e3-ba7cdc8ce037" alt="filtering btn" />
</div>

**1. Recharts ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ì°¨íŠ¸ êµ¬í˜„**
  > Chart ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ ì •
  > - apexChartsì™€ Chart.jsì˜ í†µí•©ì„± ë¬¸ì œ: ApexChartsëŠ” ê°•ë ¥í•œ ê¸°ëŠ¥ê³¼ ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ ëŠ¥ë ¥ì„ ì œê³µí•˜ì§€ë§Œ, ë¦¬ì•¡íŠ¸ì™€ í†µí•©í•˜ê¸° ìœ„í•´ì„  react-apexchartsì™€ ê°™ì€ ì¶”ê°€ ë˜í¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ë˜í•œ Chart.jsë„ ë¦¬ì•¡íŠ¸ì™€ í†µí•©ì„±ì´ ë–¨ì–´ì§€ë©°, ë³µì¡í•œ ì°¨íŠ¸ì˜ ê²½ìš° ì¶”ê°€ ì‘ì—…ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.
  > - react-chartjs-2ì˜ í•œê³„: react-chartjs-2ëŠ” Chart.jsë¥¼ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë˜í¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ì§€ë§Œ, Rechartsë‚˜ D3.jsì™€ ë¹„êµí–ˆì„ ë•Œ ë¦¬ì•¡íŠ¸ í†µí•©ì„±ì´ ë‚®ì•„ ì„ íƒ ê¸°ì¤€ì—ì„œ ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤.
  > - D3.jsì˜ ë³µì¡ì„±: D3.jsëŠ” ìµœê³  ìˆ˜ì¤€ì˜ ìœ ì—°ì„±ê³¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ ì œê³µí•˜ì§€ë§Œ, ëŸ¬ë‹ ì»¤ë¸Œê°€ ë†’ê³  ì´ˆê¸° ì„¤ì • ë° ì‘ì—…ì— ì‹œê°„ì´ ë§ì´ ì†Œìš”ë©ë‹ˆë‹¤. ë˜í•œ, D3.jsëŠ” ë¦¬ì•¡íŠ¸ì™€ì˜ í†µí•©ì´ ì–´ë µê³ , ì£¼ë¡œ ë³µì¡í•œ ê³ ê¸‰ ì‹œê°í™”ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
  > - Rechartsì˜ ì í•©ì„±: RechartsëŠ” Reactì—ì„œ ê°œë°œë˜ì—ˆê¸° ë•Œë¬¸ì— React ì•±ì—ì„œì˜ ì‚¬ìš©ì„±ì´ ë›°ì–´ë‚˜ë©°, ë°ì´í„° ì–‘ì´ ì ì„ ë•Œ ë¹ ë¥´ê²Œ ë Œë”ë§ë˜ëŠ” ì¥ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì™€ì˜ í†µí•©ì´ ì›í™œí•˜ë©°, ê°„ë‹¨í•œ APIì™€ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥í•œ ì˜µì…˜ì„ ì œê³µí•´ì£¼ê¸° ë•Œë¬¸ì— ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ì‰½ê²Œ ì‹œì‘í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë°ì´í„° ì–‘ì´ ì ê³ , ë¦¬ì•¡íŠ¸ì™€ì˜ í†µí•©ì„±ì´ ë†’ìœ¼ë©° ê°„ë‹¨í•œ ì°¨íŠ¸ë¥¼ ë¹ ë¥´ê²Œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ **Recharts**ë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 

**2. ë°ì´í„° ê°€ê³µ**
- ```getChart``` í•¨ìˆ˜ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ê³ , ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì—¬ ```chartArray``` ë°°ì—´ì— ì €ì¥í•©ë‹ˆë‹¤.
- ë°ì´í„° ê°ì²´ì˜ í‚¤ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ë°ì´í„°ë¥¼ ìƒˆë¡œìš´ êµ¬ì¡°ë¡œ ë§¤í•‘í•˜ê³ , time ë° date í”„ë¡œí¼í‹°ì—ëŠ” ë‚ ì§œ ë° ì‹œê°„ í˜•ì‹ì˜ ë¬¸ìì—´ì„ í• ë‹¹í•©ë‹ˆë‹¤.
- ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ëŸ¬í•œ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê°€ê³µí•˜ì—¬ í•„ìš”í•œ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. 
```typescript
const useChartData = () => {
  const [chartData, setChartData] = useState<IChart[]>([]);

  useEffect(() => {
    const getChart = async () => {
      const data: IResponse = await getChartData();

      const chartArray: IChart[] = Object.keys(data).map((key) => {
        return {
          ...data[key],
          time: new Date(key).toLocaleTimeString(),
          date: new Date(key).toLocaleDateString()
        };
      });
      setChartData(chartArray);
    };
    getChart();
  }, []);
  
  const districtName = [...new Set(chartData.map((data) => (data.id)))].sort(); // ê³ ìœ í•œ id ê°’ ì¶”ì¶œ í›„ ì •ë ¬
  const uniqueDate = [...new Set(chartData.map((item) => (item.date)))];        // ê³ ìœ í•œ date ê°’ ì¶”ì¶œ

  return { data: chartData, districtName, uniqueDate };
};
```

**3. hover ê¸°ëŠ¥ êµ¬í˜„**
- ì‚¬ìš©ìì—ê²Œ ë°ì´í„° í¬ì¸íŠ¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì»¤ìŠ¤í…€ íˆ´íŒì„ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
- íˆ´íŒì´ í™œì„±í™”ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€(active)ì™€ íˆ´íŒì— í‘œì‹œë  ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” ë°°ì—´(payload)ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
- activeê°€ trueì´ê³  payload ë°°ì—´ì´ ì¡´ì¬í•˜ë©° ë¹„ì–´ ìˆì§€ ì•Šì€ ê²½ìš°, ì¦‰ íˆ´íŒì´ í™œì„±í™”ë˜ê³  ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°, ì»¤ìŠ¤í…€ íˆ´íŒì„ ë Œë”ë§í•©ë‹ˆë‹¤.

```typescript
const CustomToolTip: React.FC<CustomToolTipProps> = ({ active, payload }) => {
  if (active && payload && payload.length) 
    return (
      <StyledToolTip>
        <h4 className='tooltip-id'>ğŸš© {payload[0].payload.id}</h4>
        <div className='tooltip-value'>
          <p><span className='tooltip-value-area'>value_area : </span>{payload[0].payload.value_area}</p>
          <p><span className='tooltip-value-bar'>value_bar : </span>{payload[0].payload.value_bar}</p>
        </div>
      </StyledToolTip>
    );

  return null;
};
```

**4. query stringìœ¼ë¡œ í•„í„°ë§ êµ¬í˜„**
- urlì˜ ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” useSearchParams í›…ì„ ì‚¬ìš©í•˜ì—¬ í•„í„°ë§ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨í•˜ë”ë¼ë„ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ë•Œë¬¸ì— privateí•œ ê°’ì´ ì•„ë‹ˆë¼ë©´ query stringìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ìœ ìš©í•´ ë³´ì…ë‹ˆë‹¤. í•„í„°ë§ëœ ë°ì´í„°ë¥¼ ì‰½ê²Œ ê³µìœ í•  ìˆ˜ ìˆìœ¼ë©°, ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ë¥¼ ê´€ë¦¬í•˜ì—¬ ë’¤ë¡œ & ì•ìœ¼ë¡œ ê°€ê¸° ê¸°ëŠ¥ë„ ì§€ì›ë©ë‹ˆë‹¤. 
- ```handleClickFiltering``` í•¨ìˆ˜ëŠ” í•„í„° ë²„íŠ¼ì´ í´ë¦­ë˜ë©´ í˜¸ì¶œë©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ì„ íƒí•œ ì§€ì—­ì˜ "id" ê°’ì„ URLì˜ ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. ë²„íŠ¼ì„ í´ë¦­í•œ ê²½ìš°ì—ë§Œ ```setSearchParams```ë¥¼ í˜¸ì¶œí•˜ì—¬ ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. í•„í„°ë§ëœ ê²°ê³¼ëŠ” URLì˜ "id" ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ë¡œ ì„¤ì •ë˜ì–´ í•´ë‹¹ ì§€ì—­ì˜ ì°¨íŠ¸ë¥¼ ë Œë”ë§í•˜ê²Œ ë©ë‹ˆë‹¤.
```ts
const Home = () => {
  const { districtName, uniqueDate } = useChartData();
  const [searchParams, setSearchParams] = useSearchParams();
  const currentParams = searchParams.get("id");
  const navigate = useNavigate();

  const handleClickFiltering = (clickedId: string) => {
    if (clickedId) setSearchParams({ id: clickedId });
  };

  return (
    <>
      <StyledContainer>
        <div className="filter">
          <button
            onClick={() => navigate("/")}
            className={`${currentParams === null ? "active" : ""}`}
          >í•´ì œ</button>
          {districtName.map((name) => (
            <button
              key={name}
              onClick={() => handleClickFiltering(name)}
              className={`${currentParams === name ? "active" : ""}`}
            >{name}</button>
          ))}
        </div>
        <span className="date">({uniqueDate} ê¸°ì¤€)</span>
      </StyledContainer>
      <Chart
        district={currentParams}
        handleClickFiltering={handleClickFiltering}
      />
    </>
  )
};
```

<br /> 

## ğŸ’¼ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
src/
â”£ ğŸ“‚ apis/
â”ƒ   â”— ğŸ“œ index.ts
â”£ ğŸ“‚ components/
â”ƒ   â”£ ğŸ“‚ common/
â”ƒ   â”ƒ   â”£ ğŸ“‚ header/
â”ƒ   â”ƒ   â”— ğŸ“‚ layout/
â”ƒ   â”£ ğŸ“‚ Chart/
â”ƒ   â”ƒ   â”— ğŸ“œ Chart.tsx
â”ƒ   â”£ ğŸ“‚ CustomDot/
â”ƒ   â”ƒ   â”— ğŸ“œ CustomDot.tsx
â”ƒ   â”— ğŸ“‚ CustomToolTip/
â”ƒ       â”— ğŸ“œ CustomToolTip.tsx
â”£ ğŸ“‚ hooks/
â”ƒ   â”— ğŸ“œ useChartData.ts
â”£ ğŸ“‚ constant/
â”ƒ   â”— ğŸ“œ chart.const.ts
â”£ ğŸ“‚ pages/
â”ƒ   â”£ ğŸ“‚ error/
â”ƒ   â”£ ğŸ“‚ home/
â”ƒ   â”— ğŸ“œ index.ts
â”£ ğŸ“‚ router/
â”ƒ   â”— ğŸ“œ Router.tsx
â”£ ğŸ“‚ types/
â”ƒ   â”— ğŸ“œ chart.ts
â”£ ğŸ“‚ styles/
â”ƒ   â”— ğŸ“œ GlobalStyle.tsx
â”£ ğŸ“œ App.tsx
â”— ğŸ“œ Index.tsx
```
